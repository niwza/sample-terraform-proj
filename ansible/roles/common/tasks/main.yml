---
# tasks file for common
- name: Add internal DNS name to hosts file
  lineinfile:
    dest: /etc/hosts
    regexp: '^127\.0\.0\.1'
    line: '127.0.0.1 localhost {{ ec2_private_dns_name }}'
    owner: root
    group: root
    mode: 0644
  become: true

- name: Set internal DNS name as hostname
  shell: "hostnamectl set-hostname {{ ec2_private_dns_name }}"
  become: true

- name: Check ansible facts
  debug: var=hostvars[inventory_hostname] verbosity=4
